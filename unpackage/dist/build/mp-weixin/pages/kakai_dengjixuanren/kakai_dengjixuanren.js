(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/kakai_dengjixuanren/kakai_dengjixuanren"],{"0621":function(e,a,t){"use strict";t("d3e6");var i=n(t("b0ce")),s=n(t("fc48"));function n(e){return e&&e.__esModule?e:{default:e}}Page((0,i.default)(s.default))},"28e2":function(e,a,t){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=s(t("b216"));function s(e){return e&&e.__esModule?e:{default:e}}var n={components:{uniDrawer:i.default},data:function(){return{iconsel:"../../static/checkbox_button/jiezhang-icon-anniu-sel.png",iconNosel:"../../static/checkbox_button/jiezhang-icon-anniu-nor.png",isCheckState:0,isCheckSex:0,sexvalues:[{text:"男性",value:1},{text:"女性",value:2}],agevalues:[{text:"少年",value:1},{text:"青年",value:2},{text:"中年",value:3},{text:"老年",value:4}],imageURL:"",name:"",phone:"",sex:"",age:"",card_name_type:"",mct_pkid:"",mctd_money:"",mctd_name:"",saleCheck:"",drawerisCheckState:-1,isZhiFuState:0,keywords:"",flag:!1,mainSalesManTimes:"",zhifuname:"微信支付",number:"",mainSalesMan:"",mainSalesManEmp_no:"",mainSalesAss:"",mainSalesAssManEmp_no:"",salesMan:[],payStype:[{zhifuname:"微信支付",image:"../../static/kaika_xuanren/jiezhang-icon-wxzf@2x.png"},{zhifuname:"支付宝支付",image:"../../static/kaika_xuanren/jiezhang-icon-zfbzf@2x.png"},{zhifuname:"现金支付",image:"../../static/kaika_xuanren/jiezhang-icon-xjzf@2x.png"}],selectEmpInfo:"",startCardTime:"",remark3:"",shop_pkid:""}},methods:{cha:function(){this.mainSalesAss=""},back:function(){e.navigateBack({delta:1})},agechange:function(e,a){this.isCheckState=e,console.log("ageval",a),this.age=a.text.substring(0,1),console.log("this.age",this.age)},sexChange:function(e){this.isCheckSex=e,console.log("this.isCheckSex",this.isCheckSex)},go_kaika_xuanren:function(){var a=this;a.name=a.name,console.log(a.name),a.phone=a.phone,console.log(a.phone),a.sex=a.isCheckSex,a.age=a.age,console.log(a.age),""==a.name?e.showToast({title:"请输入姓名",duration:2e3,icon:"none"}):""==a.phone&&e.showToast({title:"请输入联系电话",duration:2e3,icon:"none"})},search:function(e){console.log(e),this.salesMan=[],this.selectEmpInfo=this.keywords,this.getSales(),console.log("selectEmpInfo",this.selectEmpInfo)},salesManChange:function(e,a){this.drawerisCheckState=a,this.mainSalesManTimes=e.name,this.number=e.number},SalesMan:function(){this.flag=!this.flag,this.saleCheck="主销售"},SalesAss:function(){this.flag=!this.flag,this.saleCheck="副销售"},changeMainSalesMan:function(){"主销售"===this.saleCheck?(this.mainSalesMan=this.mainSalesManTimes,this.mainSalesManEmp_no=this.number,this.drawerisCheckState=-1):"副销售"===this.saleCheck&&(this.mainSalesAss=this.mainSalesManTimes,this.mainSalesAssManEmp_no=this.number,console.log("this.mainSalesAssManEmp_no",this.mainSalesAssManEmp_no),this.drawerisCheckState=-1),this.flag=!1},zhifuChange:function(e,a){this.isZhiFuState=e,this.zhifuname=a.zhifuname},getSales:function(){var a=this;a.shop_pkid=a.shop_pkid;var t=a.selectEmpInfo;e.request({url:a.httpUrl+"Jni_EmployeeController/selectEmployee.xsh",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{shop_pkid:a.shop_pkid,selectEmpInfo:t},success:function(e){console.log("resww(销售人员)",e);for(var t=e.data.obj,i=0;i<t.length;i++)a.salesMan.push({name:t[i].emp_name,number:t[i].emp_no})},fail:function(e){console.log("响应失败",e)}})},addCard:function(){var a=this;a.card_name=a.mctd_name,a.mi_pkid=a.mi_pkid,a.balance=a.balance,a.number_of_use=a.mctd_frequency,a.card_level_discount=a.mctd_discount,a.open_day=a.mctd_month,a.mct_pkid=a.mct_pkid,a.mctd_pkid=a.mctd_pkid,a.shop_pkid=a.shop_pkid,a.created_by=a.mainSalesManEmp_no,a.mct_img=a.imageURL,a.remark2=a.mainSalesAssManEmp_no,a.remark3=a.zhifuname,a.prople_name=a.name,a.prople_mobile=a.phone,a.prople_sex=a.sex,a.prople_age=a.age,""==a.created_by?e.showToast({title:"主销售不能为空",duration:2e3,icon:"none"}):e.request({url:a.httpUrl+"/Jni_Member_CardController/addCard.xsh",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{card_name:a.card_name,mi_pkid:a.mi_pkid,balance:a.balance,open_day:a.open_day,number_of_use:a.number_of_use,mtcd_discount:a.card_level_discount,mctd_pkid:a.mctd_pkid,shop_pkid:a.shop_pkid,created_by:a.created_by,mctd_img:a.mct_img,remark2:a.remark2,remark4:a.remark3,prople_name:a.prople_name,prople_mobile:a.prople_mobile,prople_sex:a.prople_sex,prople_age:a.prople_age},success:function(t){if(console.log("确认开卡",t),a.oc_code=t.data.oc_code,console.log(a.oc_code),void 0!==a.oc_code){var i=new Date,s=new Date(i.toString());console.log(s);var n=s.getFullYear(),c=s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1,o=s.getDate()<10?"0"+s.getDate():s.getDate();a.startCardTime=n+"."+c+"."+o,e.navigateTo({url:"../kaika_success/kaika_success?oc_code="+a.oc_code+"&startCardTime="+a.startCardTime+"&remark3="+a.remark3})}else e.showToast({title:"开卡失败",duration:2e3,icon:"none"})}})}},onLoad:function(e){var a=this;console.log("options",e),a.shop_pkid=e.shop_pkid,a.imageURL=e.imageURL,a.mct_pkid=e.mct_pkid,a.mctd_pkid=e.mctd_pkid,a.card_name_type=e.name,a.mctd_discount=e.mctd_discount,a.mctd_frequency=e.mctd_frequency,a.mctd_give_money=e.mctd_give_money,a.mctd_name=e.mctd_name,a.mctd_money=e.mctd_money,a.mctd_month=e.mctd_month,a.balance=Number(a.mctd_money)+Number(a.mctd_give_money),console.log("_this.balance",a.balance),a.mi_pkid=e.mi_pkid,a.shop_pkid=e.shop_pkid,a.name=e.huiyuanname,a.sex=e.sex,"男"==a.sex?a.isCheckSex=0:"女"==a.sex&&(a.isCheckSex=1),a.phone=e.mi_mobile,a.age=e.age,"少"==a.age?a.isCheckState=0:"青"==a.age?a.isCheckState=1:"中"==a.age?a.isCheckState=2:"老"==a.age&&(a.isCheckState=3),a.getSales()}};a.default=n}).call(this,t("543d")["default"])},"2f0a":function(e,a,t){"use strict";t.r(a);var i=t("28e2"),s=t.n(i);for(var n in i)"default"!==n&&function(e){t.d(a,e,function(){return i[e]})}(n);a["default"]=s.a},"435d":function(e,a,t){},"4d62":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i={name:"uni-drawer",props:{visible:{type:Boolean,default:!1},mode:String,mask:{type:[Boolean,String],default:!0}},data:function(){return{visibleSync:!1,showDrawer:!1,rightMode:!1,closeTimer:null,watchTimer:null}},watch:{visible:function(e){var a=this;clearTimeout(this.watchTimer),setTimeout(function(){a.showDrawer=e},100),this.visibleSync&&clearTimeout(this.closeTimer),e?this.visibleSync=e:this.watchTimer=setTimeout(function(){a.visibleSync=e},300)}},computed:{showMask:function(){return"true"===String(this.mask)}},created:function(){var e=this;this.visibleSync=this.visible,setTimeout(function(){e.showDrawer=e.visible},100),this.rightMode="right"===this.mode},methods:{close:function(){var e=this;this.showDrawer=!1,this.$emit("close"),this.closeTimer=setTimeout(function(){e.visibleSync=!1},200)},moveHandle:function(){}}};a.default=i},"5eec":function(e,a,t){"use strict";var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return e.visibleSync?t("view",{staticClass:"uni-drawer",class:{"uni-drawer--visible":e.showDrawer,"uni-drawer--right":e.rightMode},attrs:{eventid:"41bc520f-1"},on:{touchmove:function(a){a.stopPropagation(),a.preventDefault(),e.moveHandle(a)}}},[t("view",{staticClass:"uni-drawer__mask",attrs:{eventid:"41bc520f-0"},on:{tap:e.close}}),t("view",{staticClass:"uni-drawer__content"},[e._t("default",null,{mpcomid:"41bc520f-0"})],2)]):e._e()},s=[];t.d(a,"a",function(){return i}),t.d(a,"b",function(){return s})},"63a3":function(e,a,t){},6488:function(e,a,t){"use strict";t.r(a);var i=t("4d62"),s=t.n(i);for(var n in i)"default"!==n&&function(e){t.d(a,e,function(){return i[e]})}(n);a["default"]=s.a},b216:function(e,a,t){"use strict";t.r(a);var i=t("5eec"),s=t("6488");for(var n in s)"default"!==n&&function(e){t.d(a,e,function(){return s[e]})}(n);t("d0cc");var c=t("2877"),o=Object(c["a"])(s["default"],i["a"],i["b"],!1,null,null,null);a["default"]=o.exports},b8aa:function(e,a,t){"use strict";var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("view",{staticClass:"zong"},[t("view",{staticClass:"main"},[t("view",{staticClass:"nav"},[t("view",{staticClass:"naver"},[t("view",{staticClass:"nav-list iconfont icon-back back",attrs:{eventid:"fab3754e-0"},on:{click:e.back}}),t("view",{staticClass:"nav-list",attrs:{id:"life0"}},[e._v("开卡")]),t("view",{staticClass:"nav-list"})]),t("image",{staticClass:"card",attrs:{src:e.imageURL,mode:" widthFix"}}),t("view",{staticClass:"card"},[t("view",{staticClass:"cardtop"},[t("view",{staticClass:"cardVip"},[e._v("VIP")]),t("view",{staticClass:"cardTypeC"},[e._v(e._s(e.card_name_type))])]),t("view",{staticClass:"cardfooter"},[t("view",{staticClass:"noCard"},[e._v("NO."+e._s(e.mct_pkid))]),t("view",{staticClass:"moneny"},[t("view",{staticClass:"moneny1"},[e._v(e._s(e.mctd_name))]),t("view",{staticClass:"moneny2"},[e._v(e._s(e.mctd_money)+"元")])])])])]),t("view",{staticClass:"middle"},[t("view",{staticClass:"xinxi"},[e._m(0),t("view",{staticClass:"xinin_x"},[e._v("姓名"),t("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"xin_y1",attrs:{type:"text",value:"",placeholder:"输入会员姓名(必须输入)",id:"inputFunc",eventid:"fab3754e-1"},domProps:{value:e.name},on:{input:[function(a){a.target.composing||(e.name=a.target.value)},e.inputFunc]}})]),t("view",{staticClass:"xian"}),t("view",{staticClass:"xinin_x"},[e._v("手机号"),t("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],staticClass:"xin_y2",attrs:{type:"text",value:"",placeholder:"输入手机号(必须输入)",eventid:"fab3754e-2"},domProps:{value:e.phone},on:{input:function(a){a.target.composing||(e.phone=a.target.value)}}})]),t("view",{staticClass:"xian"}),t("view",{staticClass:"xinin_x"},[e._v("性别"),t("view",{staticClass:"dengji_sex"},[t("radio-group",{staticClass:"xin_y3",attrs:{eventid:"fab3754e-4",mpcomid:"fab3754e-0"},on:{change:e.sexChange},model:{value:e.sex,callback:function(a){e.sex=a},expression:"sex"}},e._l(e.sexvalues,function(a,i){return t("label",{key:i,attrs:{for:"nan",eventid:"fab3754e-3-"+i},on:{click:function(a){e.sexChange(i)}}},[t("image",{staticClass:"selicon",attrs:{src:e.isCheckSex==i?e.iconsel:e.iconNosel,mode:""}}),e._v(e._s(a.text))])}))],1)]),t("view",{staticClass:"xian"}),t("view",{staticClass:"xinin_x",attrs:{eventid:"fab3754e-6"},model:{value:e.age,callback:function(a){e.age=a},expression:"age"}},[e._v("年龄段"),t("view",{staticClass:"dengji_sex"},[t("radio-group",{staticClass:"xin_y4",attrs:{mpcomid:"fab3754e-1"}},e._l(e.agevalues,function(a,i){return t("label",{key:i,attrs:{for:"shaonian",eventid:"fab3754e-5-"+i},on:{click:function(t){e.agechange(i,a)}}},[t("image",{staticClass:"selicon",attrs:{src:e.isCheckState==i?e.iconsel:e.iconNosel,mode:""}}),e._v(e._s(a.text))])}))],1)]),t("view",{staticClass:"xian"}),t("view",{staticClass:"next",attrs:{eventid:"fab3754e-7"},on:{click:e.go_kaika_xuanren}},[e._v("下一步")])]),t("view",{staticClass:"xinxi"},[e._m(1),t("view",{staticClass:"xinin_x"},[e._v("主销售人员"),t("input",{directives:[{name:"model",rawName:"v-model",value:e.mainSalesMan,expression:"mainSalesMan"}],staticClass:"xin_y2",attrs:{type:"text",disabled:"",placeholder:"选择主销售姓名(必填)",eventid:"fab3754e-8"},domProps:{value:e.mainSalesMan},on:{click:e.SalesMan,input:function(a){a.target.composing||(e.mainSalesMan=a.target.value)}}}),t("view",{staticClass:"pleaseChoose",attrs:{eventid:"fab3754e-9"},on:{click:function(a){e.flag=!e.flag}}},[e._v("选择>")])]),t("view",{staticClass:"xian"}),t("view",{staticClass:"xinin_x"},[e._v("副销售人员"),t("input",{directives:[{name:"model",rawName:"v-model",value:e.mainSalesAss,expression:"mainSalesAss"}],staticClass:"xin_y2",attrs:{type:"text",disabled:"",placeholder:"输入副销售姓名(可不填)",eventid:"fab3754e-10"},domProps:{value:e.mainSalesAss},on:{click:e.SalesAss,input:function(a){a.target.composing||(e.mainSalesAss=a.target.value)}}}),t("view",{staticClass:"cha",attrs:{eventid:"fab3754e-11"},on:{click:e.cha}},[e._v("×")])]),t("view",{staticClass:"xian"})]),t("view",{staticClass:"zhifu"},[e._m(2),t("view",{staticClass:"zhifubg"},e._l(e.payStype,function(a,i){return t("view",{key:i,staticClass:"zhifu_zf",attrs:{eventid:"fab3754e-12-"+i},on:{click:function(t){e.zhifuChange(i,a)}}},[t("label",[t("image",{staticClass:"zhifu_image",attrs:{src:a.image,mode:""}}),t("label",{staticClass:"zhifu_zf_zi"},[e._v(e._s(a.zhifuname))])],1),t("label",[t("image",{staticClass:"zhifu_section",class:e.isZhiFuState===i?e.iconsel:e.iconNosel,attrs:{src:e.isZhiFuState==i?e.iconsel:e.iconNosel}})])],1)}))]),t("view",{staticStyle:{height:"330rpx"}})])]),t("uni-drawer",{attrs:{visible:e.flag,mode:"right",eventid:"fab3754e-19",mpcomid:"fab3754e-3"},on:{close:function(a){e.flag=!e.flag}}},[t("scroll-view",{staticClass:"drawer",attrs:{"scroll-y":""}},[t("view",{staticStyle:{}},[t("view",{staticClass:"orange"}),t("view",{staticClass:"uni-title"},[e._v("员工选择")]),t("view",{staticClass:"search_xian"}),t("view",{staticClass:"search-block"},[t("view",{staticClass:"search-ico-wapper"},[t("image",{staticClass:"search-ico",attrs:{src:"../../static/chongzhi_sousuo/chongzhi-icon-sousuo@2x.png",mode:""}})]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.keywords,expression:"keywords"}],staticClass:"search-text",attrs:{type:"text",value:"",placeholder:"点击输入搜索内容",maxlength:"10",eventid:"fab3754e-13"},domProps:{value:e.keywords},on:{input:[function(a){a.target.composing||(e.keywords=a.target.value)},function(a){e.search(e.keywords)}]}})]),t("view",{staticClass:"shadow"}),t("view",{staticClass:"uni-list uni-common-mt"},[t("view",{staticClass:"uni-list-cell",attrs:{"hover-class":"uni-list-cell-hover"}},[t("view",{staticClass:"uni-list-cell-navigate uni-navigate-right"},e._l(e.salesMan,function(a,i){return t("view",{key:i,staticClass:"xinin_x",attrs:{eventid:"fab3754e-16-"+i},on:{click:function(t){e.salesManChange(a,i)}}},[t("view",{staticClass:"chooseSales"},[t("image",{staticClass:"touxiang",attrs:{src:a.image,mode:""}}),t("radio-group",{attrs:{mpcomid:"fab3754e-2-"+i}},[t("view",{staticClass:"salesManName",attrs:{eventid:"fab3754e-14-"+i},model:{value:e.mainSalesMan,callback:function(a){e.mainSalesMan=a},expression:"mainSalesMan"}},[e._v(e._s(a.name))]),t("view",{staticClass:"salesManNumber",attrs:{eventid:"fab3754e-15-"+i},model:{value:e.number,callback:function(a){e.number=a},expression:"number"}},[e._v("工号:"+e._s(a.number))]),t("label",{attrs:{for:""}},[t("image",{staticClass:"drawer_selicon",attrs:{src:e.drawerisCheckState==i?e.iconsel:e.iconNosel,mode:""}})])],1)],1),t("view",{staticClass:"line"})])}))])])]),t("view",{staticClass:"kongbai"}),t("view",{staticClass:"drawer_button"},[t("view",{staticClass:"drawer_quxiao",attrs:{eventid:"fab3754e-17"},on:{click:function(a){e.flag=!e.flag}}},[e._v("取消")]),t("view",{staticClass:"drawer_queding",attrs:{eventid:"fab3754e-18"},on:{click:e.changeMainSalesMan}},[e._v("确定")])])])],1),t("view",{staticClass:"bottom"},[t("view",{staticClass:"quxiao",attrs:{eventid:"fab3754e-20"},on:{click:e.back}},[e._v("取消")]),t("view",{staticClass:"queding",attrs:{eventid:"fab3754e-21"},on:{click:e.addCard}},[e._v("确定")])])],1)},s=[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("view",{staticClass:"shu"},[e._v("|"),t("view",{staticClass:"dengji huiyuan"},[e._v("会员信息登记")])])},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("view",{staticClass:"shu"},[t("view",{staticClass:"lines"}),t("view",{staticClass:"dengji huiyuan"},[e._v("销售人员")])])},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("view",{staticClass:"shu"},[t("view",{staticClass:"lines"}),t("view",{staticClass:"dengji huiyuan"},[e._v("支付方式")])])}];t.d(a,"a",function(){return i}),t.d(a,"b",function(){return s})},be9c:function(e,a,t){"use strict";var i=t("63a3"),s=t.n(i);s.a},d0cc:function(e,a,t){"use strict";var i=t("435d"),s=t.n(i);s.a},fc48:function(e,a,t){"use strict";t.r(a);var i=t("b8aa"),s=t("2f0a");for(var n in s)"default"!==n&&function(e){t.d(a,e,function(){return s[e]})}(n);t("be9c");var c=t("2877"),o=Object(c["a"])(s["default"],i["a"],i["b"],!1,null,null,null);a["default"]=o.exports}},[["0621","common/runtime","common/vendor"]]]);