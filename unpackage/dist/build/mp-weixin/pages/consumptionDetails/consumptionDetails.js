(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/consumptionDetails/consumptionDetails"],{"007c":function(s,e,t){"use strict";t.r(e);var i=t("5157"),a=t.n(i);for(var o in i)"default"!==o&&function(s){t.d(e,s,function(){return i[s]})}(o);e["default"]=a.a},"2b88":function(s,e,t){"use strict";t("d3e6");var i=o(t("b0ce")),a=o(t("425b"));function o(s){return s&&s.__esModule?s:{default:s}}Page((0,i.default)(a.default))},"3dd8":function(s,e,t){"use strict";var i=t("5f25"),a=t.n(i);a.a},"425b":function(s,e,t){"use strict";t.r(e);var i=t("a21c"),a=t("007c");for(var o in a)"default"!==o&&function(s){t.d(e,s,function(){return a[s]})}(o);t("3dd8");var n=t("2877"),l=Object(n["a"])(a["default"],i["a"],i["b"],!1,null,null,null);e["default"]=l.exports},5157:function(s,e,t){"use strict";(function(s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={data:function(){return{telvalue:"",isShow:!1,isServeShow:!1,shows:!0,isShows:!1,jzShow:!1,tlists:[],username:"",assisant:"",order_code:"",userDes:"",userid:"",totalPrice:0,shop_pkid:""}},onLoad:function(e){console.log("option",e);var t=this;t.username=e.username,t.assisant=e.assisant,t.order_code=e.order_code,t.userDes=e.userDes,t.userid=e.userid,t.shop_pkid=e.shop_pkid,s.request({url:t.httpUrl+"v_order_infoController/findById.xsh?shop_pkid="+e.shop_pkid+"&order_code="+e.order_code,method:"GET",data:{},success:function(s){console.log("获取订单详情",s),t.tlists=[];var e=s.data.objs;for(var i in e)t.tlists.push({title:e[i].goods_name,price:Number(e[i].standard_price),sl:Number(e[i].detail_num)});console.log("this.tlists",t.tlists);for(var a=t.tlists.length,o=0;o<a;o++)t.totalPrice+=Number(t.tlists[o].price);t.totalPrice=t.totalPrice.toFixed(2)},fail:function(s){console.log("响应失败",s)}})},methods:{back:function(){s.navigateBack({delta:1})},jzSel:function(s){0==this.jzShow?this.jzShow=!0:this.jzShow=!1,this.shows=!1,this.isShows=!0},jzSelhidden:function(){this.shows=!0,this.isShows=!1},jzbtn:function(e){console.log(e);var t=this;"手机号结账"!==e?s.navigateTo({url:"../settle/settle?jzType="+e+"&username="+t.username+"&assisant="+t.assisant+"&order_code="+t.order_code+"&userDes="+t.userDes+"&totalPrice="+t.totalPrice+"&userid="+t.userid+"&shop_pkid="+t.shop_pkid}):(t.isShow=!0,t.isServeShow=!0)},servecancel:function(){var s=this;s.isShow=!1,s.isServeShow=!1,s.telvalue=""},serveok:function(e){var t=this;console.log("_this.telvalue",t.telvalue),""==t.telvalue?s.showToast({icon:"none",title:"请输入手机号！"}):s.request({url:t.httpUrl+"Jni_Member_CardController/selectCard.xsh?shop_pkid="+t.shop_pkid+"&mi_mobile="+t.telvalue,method:"GET",data:{},success:function(i){console.log("获取手机号",i),t.orderlists=[];var a=i.data.message;"获取成功"==a?(s.navigateTo({url:"../settle/settle?jzType="+e+"&username="+t.username+"&assisant="+t.assisant+"&order_code="+t.order_code+"&userDes="+t.userDes+"&totalPrice="+t.totalPrice+"&telphone="+t.telvalue+"&userid="+t.userid+"&shop_pkid="+t.shop_pkid}),t.isShow=!1,t.isServeShow=!1,t.telvalue=""):s.showToast({icon:"none",title:"手机号不存在请重新输入!"})},fail:function(s){console.log("响应失败",s)}})},scan:function(e){var t=this;s.scanCode({success:function(i){console.log("res成功",i),console.log("条码类型："+i.scanType),console.log("条码内容："+i.result);var a=i.result;s.request({url:t.httpUrl+"Jni_Member_CardController/selectCard.xsh?shop_pkid="+t.shop_pkid+"&openid="+a,method:"GET",data:{},success:function(i){console.log("获取openid",i),t.orderlists=[];var a=i.data.message;"获取成功"==a?s.navigateTo({url:"../settle/settle?jzType="+e+"&username="+t.username+"&assisant="+t.assisant+"&order_code="+t.order_code+"&userDes="+t.userDes+"&totalPrice="+t.totalPrice+"&telphone="+t.telvalue+"&userid="+t.userid+"&shop_pkid="+t.shop_pkid}):s.showToast({icon:"none",title:"用户不存在!"})},fail:function(s){console.log("响应失败",s)}})}})},ts:function(s){s.stopPropagation(),1==this.jzShow&&(this.jzShow=!1),this.shows=!0,this.isShows=!1}}};e.default=t}).call(this,t("543d")["default"])},"5f25":function(s,e,t){},a21c:function(s,e,t){"use strict";var i=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("view",{staticClass:"order",attrs:{eventid:"ab68606a-9"},on:{touchstart:function(e){s.ts(e)}}},[t("view",{directives:[{name:"show",rawName:"v-show",value:s.isShow,expression:"isShow"}],staticClass:"Zao"}),t("view",{directives:[{name:"show",rawName:"v-show",value:s.isServeShow,expression:"isServeShow"}],staticClass:"memberContent"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.telvalue,expression:"telvalue"}],staticClass:"memberSel",attrs:{type:"number",placeholder:"请输入手机号",eventid:"ab68606a-0"},domProps:{value:s.telvalue},on:{input:function(e){e.target.composing||(s.telvalue=e.target.value)}}}),t("view",{staticClass:"btnbg"},[t("button",{staticClass:"qx",attrs:{eventid:"ab68606a-1"},on:{click:function(e){s.servecancel()}}},[s._v("取消")]),t("button",{staticClass:"qd",attrs:{eventid:"ab68606a-2"},on:{click:function(e){s.serveok("手机号结账")}}},[s._v("确定")])],1)]),t("view",{staticClass:"nav"},[t("view",{staticClass:"navlist"},[t("view",{staticClass:"nav-list",attrs:{eventid:"ab68606a-3"},on:{click:s.back}},[t("image",{staticClass:"backicon",attrs:{src:"../../static/order/jiehznag-icon-fanhui.png",mode:""}})]),t("view",{staticClass:"nav-list",attrs:{id:"life0"}},[s._v("0卡生活")]),t("view",{staticClass:"nav-list"})]),t("view",{staticClass:" contentlist"},[t("view",{staticClass:"orderlist"},[t("view",{staticClass:"olistleft"}),t("view",{staticClass:"olist"},[t("view",{staticStyle:{"font-size":"1.2em"}},[s._v(s._s(s.username))]),t("view",{staticStyle:{"font-size":"1em"}},[s._v(s._s(s.order_code))]),t("view",{staticStyle:{"font-size":"0.8em"}},[s._v(s._s(s.userDes))])]),t("view",{staticClass:"olistleft"})])])]),t("view",{staticClass:"ordercontent"},[t("view",{staticClass:"orderTitle"},[t("label",{staticClass:"tilteline"}),s._v("消费详情")],1),s._m(0),t("view",{staticClass:"tbody"},s._l(s.tlists,function(e,i){return t("view",{key:i,staticClass:"tbodylist"},[t("view",{staticClass:"tabler"},[s._v(s._s(e.title))]),t("view",{staticClass:"tabler"},[s._v("￥"+s._s(e.price))]),t("view",{staticClass:"tabler sl"},[s._v(s._s(e.sl))])])}))]),t("view",{staticClass:"foot"},[s._m(1),t("view",{staticClass:"fs je"},[t("view",[s._v("￥"+s._s(s.totalPrice))])]),t("view",{staticClass:"fs saoprice"},[t("view",{staticClass:"jzlist"},[t("button",{directives:[{name:"show",rawName:"v-show",value:s.jzShow,expression:"jzShow"}],attrs:{eventid:"ab68606a-4"},on:{click:function(e){s.jzbtn("散客结账")}}},[s._v("散客结账")])],1),t("view",{staticClass:"jzlist"},[t("button",{directives:[{name:"show",rawName:"v-show",value:s.jzShow,expression:"jzShow"}],attrs:{eventid:"ab68606a-5"},on:{click:function(e){s.jzbtn("手机号结账")}}},[s._v("手机号结账")])],1),t("view",{staticClass:"saobg"},[t("label",{staticClass:"btn",attrs:{eventid:"ab68606a-6"},on:{touchstart:function(e){s.scan("扫一扫结账")}}},[s._v("扫一扫结账")]),t("image",{directives:[{name:"show",rawName:"v-show",value:s.shows,expression:"shows"}],staticClass:"upicon jssel",attrs:{src:"../../static/mingxi-cion-jiantou.png",mode:"",eventid:"ab68606a-7"},on:{click:function(e){e.stopPropagation(),s.jzSel(e)}}}),t("image",{directives:[{name:"show",rawName:"v-show",value:s.isShows,expression:"isShows"}],staticClass:"upicon jssel",attrs:{src:"../../static/mingxi-cion-jiantou.png",mode:"",eventid:"ab68606a-8"},on:{click:function(e){e.stopPropagation(),s.jzSelhidden(e)}}})],1)])])])},a=[function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("view",{staticClass:"theader"},[t("view",{staticClass:"tabler"},[t("image",{attrs:{src:"../../static/xfmx-icon-chanpin@3x.png",mode:""}}),s._v("产品/服务")]),t("view",{staticClass:"tabler"},[t("image",{attrs:{src:"../../static/xfmx-icon-jiage@3x.png",mode:""}}),s._v("价格")]),t("view",{staticClass:"tabler"},[t("image",{attrs:{src:"../../static/xfmx-icon-shuliang@3x.png",mode:""}}),s._v("数量")])])},function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("view",{staticClass:"fs"},[t("view",[s._v("合计金额:")])])}];t.d(e,"a",function(){return i}),t.d(e,"b",function(){return a})}},[["2b88","common/runtime","common/vendor"]]]);