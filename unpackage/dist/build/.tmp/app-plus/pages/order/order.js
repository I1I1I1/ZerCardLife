(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order"],{"23f6":function(t,e,s){"use strict";s.r(e);var i=s("9a40"),o=s.n(i);for(var a in i)"default"!==a&&function(t){s.d(e,t,function(){return i[t]})}(a);e["default"]=o.a},"30d3":function(t,e,s){},"5cc7":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c},o=[];s.d(e,"a",function(){return i}),s.d(e,"b",function(){return o})},"9a40":function(t,e,s){"use strict";(function(t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i="",o={data:function(){return{guciconqingkongIcon:this.httpUrl+"file/static/order/guc-icon-qingkong.png",gwciconjianhaoIcon:this.httpUrl+"file/static/order/gwc-icon-jianhao.png",homeiconjiahaonorIcon:this.httpUrl+"file/static/order/home-icon-jiahao-nor.png",xzygiconjiantouIcon:this.httpUrl+"file/static/order/xzyg-icon-jiantou.png",fanhuiIcon:this.httpUrl+"file/static/order/jiehznag-icon-fanhui.png",memDis:!1,gtPkid:"",gwciconnor:"../../static/order/home-icon-gwc-nor.png",gwciconsel:"../../static/order/home-icon-gwc-sel.png",classGray:"gray",classRed:"redorange",oranges:"oranges",grays:"grays",pricetotalSave:0,isshopsShow:!1,gwcIsShow:!1,zgshow:!1,selnumshow:!1,typeshow:!1,typenameshow:!1,isShow:!1,isTypeShow:!1,isServeShow:!1,isProductShow:!1,isServeOrProduct:"",tabCurrentIndex:0,tabOrderIndex:0,tabId:0,membervalue:"",memberid:"",selnum:1,assistantvalue:"",assistantid:"",typevalue:"",typenamevalue:"",timeprice:0,timetitle:"",totalPrice:"未选购服务",totaltime:0,totalarray:[],array:[],typeServe:["服务","产品"],navList:[{text:"服务"},{text:"产品"}],menuList:[],goods_pkid:"",orderDes:[],productList:[],productDes:[],datas:[],shop_pkid:"",memberidArr:[]}},onLoad:function(e){var i=this;console.log(t(e.shop_pkid," at pages\\order\\order.vue:312")),i.shop_pkid=e.shop_pkid,i.menuContent(),s.request({url:i.httpUrl+"Jni_EmployeeController/selectEmployee.xsh?shop_pkid="+i.shop_pkid,method:"GET",success:function(e){console.log(t("获取员工",e.data.obj," at pages\\order\\order.vue:324"));var s=e.data.obj;i.array=["-请选择-"],i.memberidArr=[];for(var o=0;o<s.length;o++)i.array.push(s[o].emp_name),i.memberidArr.push(s[o].emp_pkid)},fail:function(e){console.log(t("响应失败",e," at pages\\order\\order.vue:334"))}})},filters:{keepnums:function(t){var e=parseFloat(t).toFixed(3),s=e.substring(0,e.length-1);return s}},methods:{menuContent:function(){var e=this;s.request({url:e.httpUrl+"Jni_Goods_TypeController/selectGoodsType.xsh?shop_pkid="+e.shop_pkid,method:"GET",success:function(s){console.log(t("res",s," at pages\\order\\order.vue:357"));var i=s.data.obj1,o=s.data.obj2;e.menuList=[],e.productList=[];for(var a=0;a<i.length;a++)console.log(t("gtname",i[a].gt_name," at pages\\order\\order.vue:363")),e.menuList.push({text:i[a].gt_name,gtPkid:i[a].gt_pkid});for(a=0;a<o.length;a++)console.log(t("gtname",o[a].gt_name," at pages\\order\\order.vue:367")),e.productList.push({text:o[a].gt_name,gtPkid:o[a].gt_pkid});0==e.tabId?(e.gtPkid=i[0].gt_pkid,e.shop_pkid=i[0].shop_pkid):(e.gtPkid=o[0].gt_pkid,e.shop_pkid=o[0].shop_pkid);var r=e.gtPkid;e.serveContent(r)},fail:function(e){console.log(t("响应失败",e," at pages\\order\\order.vue:384"))}})},serveContent:function(e){var i=this;console.log(t("111",e," at pages\\order\\order.vue:391")),s.request({url:i.httpUrl+"Jni_GoodsController/selectGoods.xsh?gt_pkid="+e,method:"GET",success:function(e){console.log(t("resww",e," at pages\\order\\order.vue:399"));var s=e.data.obj;i.orderDes=[],i.productDes=[];for(var o=0;o<s.length;o++)0==i.tabId?i.orderDes.push({title:s[o].goods_name,des:s[o].remark,imgurl:s[o].goods_image,price:s[o].standard_price,goods_pkid:s[o].goods_pkid}):i.productDes.push({title:s[o].goods_name,des:s[o].remark,imgurl:s[o].goods_image,price:s[o].standard_price,goods_pkid:s[o].goods_pkid})},fail:function(e){console.log(t("响应失败",e," at pages\\order\\order.vue:431"))}})},back:function(){s.navigateBack({delta:1})},tabClick:function(t){this.tabCurrentIndex=t,this.tabId=t,this.tabOrderIndex=0,this.menuContent()},orderClick:function(e,s){var o=this;o.tabOrderIndex=e,o.gtPkid=s,i=s,o.serveContent(i),console.log(t("index",e," at pages\\order\\order.vue:454")),console.log(t("gtPkid",s," at pages\\order\\order.vue:455"))},addServe:function(e){console.log(t("服务添加",e," at pages\\order\\order.vue:459")),this.timeprice=e.price,this.timetitle=e.title,this.goods_pkid=e.goods_pkid,console.log(t(this.timeprice,this.timetitle," at pages\\order\\order.vue:463")),this.isShow=!0,this.isServeShow=!0,this.isServeOrProduct="服务"},addProjuct:function(e){this.timeprice=e.price,this.timetitle=e.title,this.goods_pkid=e.goods_pkid,console.log(t(this.timeprice,this.timetitle," at pages\\order\\order.vue:474")),this.isShow=!0,this.isProductShow=!0,this.isServeOrProduct="产品"},minus:function(e){"未选购服务"!==this.totalPrice&&(console.log(t("asdsadasd"," at pages\\order\\order.vue:483")),this.datas[e].num>=1&&Number(this.totalPrice)>0&&(console.log(t(this.datas[e].num," at pages\\order\\order.vue:486")),this.datas[e].num--,this.datas[e].price=this.datas[e].num*this.datas[e].tprice,this.datas[e].price=parseFloat(this.datas[e].price).toFixed(2),this.totalPrice-=this.datas[e].tprice,this.totalPrice=parseFloat(this.totalPrice).toFixed(2)),this.datas[e].num<1&&this.datas.splice(e,1),this.memDis=!0),0==this.totalPrice&&(this.datas=[],this.totalPrice="未选购服务",this.memDis=!1,this.membervalue=""),console.log(t(e," at pages\\order\\order.vue:504"))},plus:function(e){this.totalarray=[],this.datas[e].num++,console.log(t("dataslength",this.datas,this.datas.length,e," at pages\\order\\order.vue:510")),console.log(t("pricenum",this.datas[e].num," at pages\\order\\order.vue:511"));var s=Number(this.datas[e].num)*Number(this.datas[e].tprice);this.datas[e].price=parseFloat(s).toFixed(2),console.log(t("total",this.datas[e].price," at pages\\order\\order.vue:514"));var i=0;for(var o in this.datas)this.totalarray.push(this.datas[o].price);for(var a in console.log(t("this.totalarray",this.totalarray," at pages\\order\\order.vue:522")),this.totalarray)i+=Number(this.totalarray[a]);console.log(t("totalprice",parseFloat(i).toFixed(2)," at pages\\order\\order.vue:526")),this.totalPrice=parseFloat(i).toFixed(2),this.memDis=!0,"未选购服务"==this.totalPrice&&(this.totalPrice=0,this.memDis=!1)},serveok:function(){if(""!==this.membervalue){this.isShow=!1,this.isProductShow=!1,this.isServeShow=!1,this.totalarray=[],this.zgshow=!1,this.datas.push({title:this.timetitle,text:this.membervalue,memberid:this.memberid,assistantvalue:this.assistantvalue,assistantid:this.assistantid,num:1,price:this.timeprice,tprice:this.timeprice,goods_pkid:this.goods_pkid}),this.assistantvalue="";var e=0;for(var s in this.datas)this.totalarray.push(this.datas[s].price);for(var i in console.log(t("this.totalarray",this.totalarray," at pages\\order\\order.vue:556")),this.totalarray)e+=Number(this.totalarray[i]);console.log(t("totalprice",parseFloat(e).toFixed(2)," at pages\\order\\order.vue:560")),this.totalPrice=parseFloat(e).toFixed(2),this.memDis=!0,"未选购服务"==this.totalPrice&&(this.memDis=!1,this.totalPrice=0,this.membervalue="")}else this.zgshow=!0},productok:function(){if(""!==this.membervalue)if(this.zgshow=!1,""!==this.selnum){this.isShow=!1,this.isProductShow=!1,this.isServeShow=!1;var e=this.selnum;e=parseInt(e),this.totalarray=[],this.zgshow=!1,this.datas.push({title:this.timetitle,text:this.membervalue,memberid:this.memberid,assistantvalue:this.assistantvalue,assistantid:this.assistantid,num:e,price:this.timeprice*e,tprice:this.timeprice,goods_pkid:this.goods_pkid}),this.assistantvalue="";var s=0;for(var i in this.datas)this.totalarray.push(this.datas[i].price);for(var o in console.log(t("this.totalarray",this.totalarray," at pages\\order\\order.vue:596")),this.totalarray)s+=Number(this.totalarray[o]);console.log(t("totalprice",parseFloat(s).toFixed(2)," at pages\\order\\order.vue:600")),this.totalPrice=parseFloat(s).toFixed(2),this.assistantvalue="",this.selnumshow=!1,this.selnum=1,this.memDis=!0,"未选购服务"==this.totalPrice&&(this.totalPrice=0,this.memDis=!1,this.membervalue="")}else this.selnumshow=!0;else this.zgshow=!0},servcancel:function(){this.isShow=!1,this.isProductShow=!1,this.isServeShow=!1,this.zgshow=!1,this.selnumshow=!1,this.assistantvalue="",this.timetitle="",0==this.totalPrice&&(this.totalPrice="未选购服务",this.membervalue="")},produccancel:function(){this.isShow=!1,this.isProductShow=!1,this.isServeShow=!1,this.zgshow=!1,this.selnumshow=!1,this.assistantvalue="",this.timetitle="",0==this.totalPrice&&(this.totalPrice="未选购服务",this.membervalue="")},bindPickerChange:function(e){console.log(t("员工选择",e,"this.array",this.array,"_this.memberidArr",this.memberidArr," at pages\\order\\order.vue:655")),this.membervalue=this.array[e.target.value],this.memberid=this.memberidArr[e.target.value-1],"-请选择-"===this.membervalue&&(this.membervalue="",this.memberid=""),console.log(t("picker发送选择改变，携带值为",this.membervalue,this.memberid," at pages\\order\\order.vue:662"))},assistantPickerChange:function(e){this.assistantvalue=this.array[e.target.value],this.assistantid=this.memberidArr[e.target.value-1],"-请选择-"===this.assistantvalue&&(this.assistantvalue="",this.assistantid=""),console.log(t("picker发送选择改变，携带值为",this.assistantvalue,this.assistantid," at pages\\order\\order.vue:671"))},typeplus:function(){this.isShow=!0,this.isTypeShow=!0},typeChange:function(e){this.typevalue=this.typeServe[e.target.value],"-请选择-"===this.typevalue&&(this.typevalue=""),console.log(t("picker发送选择改变，携带值为",this.typevalue," at pages\\order\\order.vue:684"))},typeok:function(){""!==this.typevalue?(this.typeshow=!1,""!==this.typenamevalue?(this.isShow=!1,this.isTypeShow=!1,this.typenameshow=!1,this.typevalue="",this.typenamevalue=""):this.typenameshow=!0):this.typeshow=!0},typecancel:function(){this.isShow=!1,this.isTypeShow=!1,this.typeshow=!1,this.typenameshow=!1,this.typevalue="",this.typenamevalue=""},startShopCar:function(){this.gwcIsShow=!this.gwcIsShow,this.isshopsShow=!this.isshopsShow},shopListClick:function(e){var i=parseFloat(this.datas[e].price).toFixed(2);if(console.log(t("price",i," at pages\\order\\order.vue:723")),this.totalPrice-=i,this.totalPrice=parseFloat(this.totalPrice).toFixed(2),s.showToast({title:"删除"+this.datas[e].title+"成功！",icon:"none"}),this.memDis=!0,this.$delete(this.datas,e),0==this.totalPrice)return this.totalPrice="未选购服务",this.memDis=!1,this.membervalue="",!1},clearshop:function(){this.datas=[],this.gwcIsShow=!1,this.isshopsShow=!1,console.log(t(this.datas," at pages\\order\\order.vue:747")),s.showToast({title:"成功清空购物车！",icon:"none"}),this.totalPrice=0,this.memDis=!0,0==this.totalPrice&&(this.totalPrice="未选购服务",this.memDis=!1,this.membervalue="")},shopShow:function(){this.gwcIsShow=!1,this.isshopsShow=!1},orderDown:function(){var e=this;console.log(t("datas",e.datas,"总价：",e.totalPrice,"店铺编号id:",e.shop_pkid," at pages\\order\\order.vue:767"));var i="",o="",a="",r="",h="",n="",d=e.totalPrice,l=e.shop_pkid,c=[];if("未选购服务"==this.totalPrice)return s.showToast({title:"请添加购物车！",icon:"none"}),!1;for(var u in e.datas){i=e.datas[u].num,o=e.datas[u].goods_pkid,r=e.datas[u].price,h=e.datas[u].memberid,n=e.datas[u].assistantid,a=e.datas[u].title;var p=Number(r)/Number(i);c.push({detail_num:i,goods_pkid:o,goods_name:a,standard_price:r,lowest_price:p,sell_id:h,auxiliary_id:n,remark:"q"})}var m=JSON.stringify(c);console.log(t(e.httpUrl+"Jni_Order_InfoController/addOrderInfo.xsh?jsonData="+m+"&shop_pkid="+l+"&psort_type="+d," at pages\\order\\order.vue:807")),s.request({url:e.httpUrl+"Jni_Order_InfoController/addOrderInfo.xsh",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{jsonData:m,shop_pkid:l,psort_type:d},success:function(i){console.log(t("下单",i," at pages\\order\\order.vue:818")),s.showToast({title:"下单成功！",icon:"success"}),setTimeout(function(){s.navigateTo({url:"../orderList/orderList?shop_pkid="+e.shop_pkid})},2e3)},fail:function(e){console.log(t("响应失败",e," at pages\\order\\order.vue:832"))}})}}};e.default=o}).call(this,s("0de9")["default"],s("6e42")["default"])},"9aad":function(t,e,s){"use strict";var i=s("30d3"),o=s.n(i);o.a},f1e3:function(t,e,s){"use strict";s.r(e);var i=s("5cc7"),o=s("23f6");for(var a in o)"default"!==a&&function(t){s.d(e,t,function(){return o[t]})}(a);s("9aad");var r=s("2877"),h=Object(r["a"])(o["default"],i["a"],i["b"],!1,null,null,null);e["default"]=h.exports}},[["67cd","common/runtime","common/vendor"]]]);